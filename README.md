# 银行转账追踪系统

一个基于Node.js的银行转账任务管理和追踪系统，支持多银行间的转账路线规划、任务流程管理和实时状态追踪。

## 功能特性

- 🏦 **多银行支持**：支持多家银行间的转账操作
- 🛣️ **智能路线规划**：自动计算最优转账路线，支持多步转账
- 💰 **费用计算**：实时计算转账费用和净到账金额
- 📊 **任务管理**：完整的转账任务生命周期管理
- 🔄 **状态追踪**：实时追踪转账任务状态和进度
- 💾 **数据持久化**：基于文件系统的数据存储，易于迁移到数据库
- 🌐 **Web界面**：简洁直观的单页面应用界面

## 系统架构

### 核心组件

- **TransferTask**：转账任务数据模型
- **FileSystemPersistence**：文件系统持久化层
- **RoutePlanner**：转账路线规划算法
- **TransferService**：转账业务逻辑服务
- **RESTful API**：前后端数据交互接口
- **Web前端**：用户交互界面

### 数据流

1. 用户选择币种、金额、发款银行和收款银行
2. 系统计算所有可能的转账路线
3. 用户选择最优路线并创建转账任务
4. 系统按步骤执行转账操作
5. 用户确认每一步的资金到账情况
6. 任务完成后显示完整流程和总费用

## 快速开始

### 环境要求

- Node.js 14.0+
- npm 6.0+

### 安装步骤

1. 克隆项目
```bash
git clone <repository-url>
cd bank-transfer-tracker
```

2. 安装依赖
```bash
npm install
```

3. 启动服务器
```bash
# 开发模式
npm run dev

# 生产模式
npm start
```

4. 访问应用
打开浏览器访问 http://localhost:3000

## 配置说明

### 银行配置文件

银行信息存储在 `config/banks.json` 文件中，包含以下字段：

- `id`：银行唯一标识
- `name`：银行名称
- `type`：银行类型
- `isThirdParty`：是否为第三方账户
- `dailyLimit`：每日转出限额
- `currencies`：支持的币种列表
- `reachableBanks`：可到达的银行列表及费用信息

### 数据存储

转账任务数据存储在 `data/tasks.json` 文件中，系统会自动创建数据目录。

## API接口

### 银行相关

- `GET /api/banks` - 获取所有银行列表
- `GET /api/routes` - 获取可用转账路线

### 任务管理

- `GET /api/tasks` - 获取所有转账任务
- `POST /api/tasks` - 创建新的转账任务
- `GET /api/tasks/:id` - 获取任务详情
- `POST /api/tasks/:id/start` - 开始转账
- `POST /api/tasks/:id/confirm` - 确认资金到账
- `POST /api/tasks/:id/next` - 发送下一步资金
- `POST /api/tasks/:id/cancel` - 取消任务

## 使用指南

### 创建转账任务

1. 在"创建转账"页面选择币种、金额、发款银行和收款银行
2. 点击"查找路线"查看所有可用转账路线
3. 选择最优路线并点击"创建转账任务"

### 管理转账任务

1. 在"任务列表"页面查看所有任务
2. 点击任务卡片进入"管理任务"页面
3. 根据任务状态执行相应操作：
   - **待开始**：点击"开始转账"
   - **处理中**：确认资金到账或发送下一步资金
   - **已完成**：查看任务详情和总费用
   - **已取消**：查看取消原因

### 多步转账流程

对于多步转账任务，系统会按以下流程执行：

1. 从发款银行扣除资金
2. 等待用户确认资金到达中间银行
3. 从中间银行发送资金到下一步
4. 重复步骤2-3直到资金到达目标银行
5. 用户确认最终到账金额

## 技术特点

### 可扩展架构

- **持久化抽象**：文件系统持久化层设计为可替换，便于迁移到数据库
- **模块化设计**：各功能模块独立，便于维护和扩展
- **RESTful API**：标准化的接口设计，便于集成

### 算法优化

- **路线规划**：使用深度优先搜索算法查找所有可能路线
- **费用计算**：实时计算固定费用和比例费用
- **状态管理**：完整的状态机管理转账任务生命周期

### 用户体验

- **单页面应用**：所有功能在同一页面完成
- **实时反馈**：操作结果即时显示
- **进度可视化**：图形化显示转账进度
- **错误处理**：友好的错误提示和恢复机制

## 开发计划

### 短期目标

- [ ] 添加银行余额管理功能
- [ ] 实现转账限额检查
- [ ] 添加任务历史记录查询
- [ ] 优化移动端界面适配

### 长期目标

- [ ] 数据库持久化支持
- [ ] 实时通知功能
- [ ] 多语言支持
- [ ] 高级报表和分析功能

## 贡献指南

欢迎提交Issue和Pull Request来帮助改进这个项目。

## 许可证

MIT License

## 联系方式

如有问题或建议，请通过以下方式联系：

- 项目仓库：<repository-url>
- 邮箱：developer@example.com